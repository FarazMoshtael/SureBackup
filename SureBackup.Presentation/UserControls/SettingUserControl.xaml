<UserControl x:Class="SureBackup.Presentation.UserControls.SettingUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:enums="clr-namespace:SureBackup.Domain.Enums;assembly=SureBackup.Domain"
             xmlns:common="clr-namespace:SureBackup.Domain.Common;assembly=SureBackup.Domain"
             xmlns:local="clr-namespace:SureBackup.Presentation.UserControls" xmlns:controls="clr-namespace:SureBackup.Presentation.Controls" xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ObjectDataProvider x:Key="IntervalUnitValues" 
                            MethodName="GetValues"
                            ObjectType="{x:Type sys:Enum}"
                            xmlns:sys="clr-namespace:System;assembly=mscorlib">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="enums:IntervalUnit"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </UserControl.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>

        </Grid.RowDefinitions>
        <GroupBox Header="General">
            <Grid Margin="10">
         
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>

                </Grid.RowDefinitions>
       
                <StackPanel Orientation="Vertical" Margin="5">
                    <TextBlock Text="Interval:" Margin="0,0,0,5" Grid.Row="0" Grid.Column="2"/>
                    <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="2">
                        <ComboBox Width="100" ItemsSource="{Binding Source={StaticResource IntervalUnitValues}}" SelectedItem="{Binding IntervalUnit,Mode=TwoWay}"/>
                        <controls:NumericTextBox Width="50" Margin="5,0,0,0" Text="{Binding Interval,Mode=TwoWay}" Padding="3"/>
                    </StackPanel>
                </StackPanel>

                <Grid  Grid.Row="1" Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />

                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Backup Operation Path:" Margin="0,0,0,5" />
                    
                    
                    <TextBox  Grid.ColumnSpan="1" Grid.Row="1" Grid.Column="0" IsReadOnly="True" Text="{Binding BackupSetting.BackupOperationPath}"/>
                    <Button Grid.Row="1" Grid.Column="1" Content="Browse Directory"  HorizontalAlignment="Left" Margin="5,0,0,0" Padding="3"
                        Command="{Binding BrowseDirectoryCommand}"/>

                </Grid>
            </Grid>
        </GroupBox>

        
        <GroupBox  Grid.Row="1" Margin="0,10,0,0">
            <GroupBox.HeaderTemplate>
                <DataTemplate>
                    <CheckBox Content="Use Encryption" IsChecked="{Binding DataContext.UseEncryption,Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}" />

                </DataTemplate>
            </GroupBox.HeaderTemplate>
            <StackPanel Orientation="Vertical" Margin="10" HorizontalAlignment="Left" Grid.Column="1">
                <StackPanel Orientation="Horizontal">
                    <TextBlock >
                        <TextBlock.Text>
                            <Binding Source="{x:Static common:Constants.KeySize}" StringFormat="{}{0}" />
                        </TextBlock.Text>
                    </TextBlock>
                    <TextBlock Text=" Characters Key:" />
                </StackPanel>
              
                <PasswordBox   Width="200" Padding="3" PasswordChanged="EncryptionKey_Changed"
                              IsEnabled="{Binding UseEncryption,UpdateSourceTrigger=PropertyChanged}" x:Name="EncryptionKeyPasswordBox"/>
            </StackPanel>
        </GroupBox>

        <GroupBox Grid.Row="2">
            <GroupBox.HeaderTemplate>
                <DataTemplate>
                    <CheckBox Content="FTP Upload" IsChecked="{Binding DataContext.FTPUpload,Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}"/>

                </DataTemplate>
            </GroupBox.HeaderTemplate>
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                
                <TextBlock Text="FTP Url:" Grid.Row="0" Grid.Column="0" Margin="3"/>
                <TextBox Text="{Binding BackupSetting.FTPUrl}" IsEnabled="{Binding FTPUpload}" Grid.Row="1" Grid.Column="0"  Margin="3" Padding="3" x:Name="FTPUrlBox" />
                <TextBlock Text="FTP Username:" Grid.Row="0" Grid.Column="1"  Margin="3"/>
                <PasswordBox  Grid.Row="1" Grid.Column="1" IsEnabled="{Binding FTPUpload}" Margin="3" Padding="3" x:Name="FTPUsernamePasswordBox" PasswordChanged="FTPUsername_Changed"/>
                <TextBlock Text="FTP Password:" Grid.Row="0" Grid.Column="2"  Margin="3" />
                <PasswordBox  Grid.Row="1" Grid.Column="2" IsEnabled="{Binding FTPUpload}" Margin="3" Padding="3" PasswordChanged="FTPPassword_Changed" x:Name="FTPPasswordBox"/>

                <TextBlock Text="FTP Maximum Allowed Storage Size In Bytes:" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"  Margin="3"/>
                <controls:NumericTextBox Text="{Binding BackupSetting.HostSizeInBytes}" IsEnabled="{Binding FTPUpload}"
                                         Grid.Row="3" Grid.Column="0"  Margin="3" Padding="3" />
                
                
            </Grid>
        </GroupBox>

        <controls:CustomBorderButton Grid.Row="3" ToolTip="Save" BorderBackground="White" HorizontalAlignment="Right" FontContent="&#xf0c7;" Foreground="Green" FontSize="20"
                                     Margin="0,10,10,0" ButtonPadding="5" Command="{Binding SaveSettingCommand}"/>

        
    </Grid>
   
</UserControl>
